


{% extends "layouts/project_default.html" %}
{% block title %} Dashboard {% endblock title %}

{% block stylesheets %}
<!-- dragula css -->
<link href="/static/assets_advanced/libs/dragula/dragula.min.css" rel="stylesheet" type="text/css" />

{% endblock stylesheets %}

{% block content %}

<!-- Waiting TAG -->
<!-- <div class="float-right ml-2">
    <span class="badge badge-pill badge-soft-secondary font-size-12">Waiting</span>
</div> -->

<!-- Complete TAG -->
<!-- <div class="float-right ml-2">
    <span class="badge badge-pill badge-soft-success font-size-12">Complete</span>
</div> -->

<!-- Pending TAG -->
<!-- <div class="float-right ml-2">
    <span class="badge badge-pill badge-soft-warning font-size-12">Pending</span>
</div> -->

<div class="page-content">
    <div class="container-fluid">

        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-flex align-items-center justify-content-between">
                    <h4 class="mb-0 font-size-18">{{project_specific_data[0].pname}}</h4>

                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Customers</a></li>
                            <li class="breadcrumb-item active">{{project_specific_data[0].pname}}</li>
                        </ol>
                    </div>

                </div>
            </div>
        </div>
        <!-- end page title -->

        <div class="row">
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="dropdown float-right">
                            <a href="#" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                                <i class="mdi mdi-dots-vertical m-0 text-muted h5"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="#">Edit</a>
                                <a class="dropdown-item" href="#">Delete</a>
                            </div>
                        </div> <!-- end dropdown -->

                        <h4 class="card-title mb-4">Step 1: Set-up Data Pipelines </h4>
                        <div id="upcoming-task" class="pb-1 task-list">
                            <div class="card task-box">
                                <div class="card-body">
                                    <div class="float-right ml-2">
                                        <span class="badge badge-pill badge-soft-success font-size-12">Complete</span>
                                    </div>
                                    <div>
                                        <h5 class="font-size-15"><a href="javascript: void(0);" class="text-dark">Forecasting Timeseries Data (Required)</a></h5>
                                        <p class="text-muted mb-4">{{project_specific_data[0].datetime}}</p>
                                    </div>

                                    <div class="team float-left">
                                        {{project_specific_data[0].dataset[0].name}}
                                    </div>

                                    <div class="text-right">
                                        <h5 class="font-size-15 mb-1"></h5>
                                        <p class="mb-0 text-muted"></p>
                                    </div>
                                </div>
                                
                            </div>
                            <!-- end task card -->

                            <div class="card task-box">
                                <div class="card-body">
                                    <div class="float-right ml-2">
                                        <span class="badge badge-pill badge-soft-success font-size-12">Complete</span>
                                    </div>
                                    <div>
                                        <h5 class="font-size-15"><a href="javascript: void(0);" class="text-dark">Item Attributes (Optional)</a></h5>
                                        <p class="text-muted">{{project_specific_data[0].datetime}}</p>
                                    </div>
                                
                                    {% if project_specific_data[0].dataset|length != 1 %}
                                    
                                    {% endif %}
                                    <div class="text-right">
                                        <h5 class="font-size-15 mb-1"></h5>
                                        <p class="mb-0 text-muted"></p>
                                    </div>
                                </div>
                                
                            </div>
                            <!-- end task card -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- end col -->

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="dropdown float-right">
                            <a href="#" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                                <i class="mdi mdi-dots-vertical m-0 text-muted h5"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="#">Edit</a>
                                <a class="dropdown-item" href="#">Delete</a>
                            </div>
                        </div> <!-- end dropdown -->

                        <h4 class="card-title mb-4">Step 2: Schema Mapping</h4>
                        <div id="inprogress-task" class="pb-1 task-list">
                            <div class="card task-box">
                                <div class="card-body">
                                    <div class="float-right ml-2">
                                        <span class="badge badge-pill badge-soft-warning font-size-12">Pending</span>
                                    </div>
                                    <div>
                                        <h5 class="font-size-15"><a href="javascript: void(0);" class="text-dark">Forecasting Timeseries Data (Required)</a></h5>
                                        <p class="text-muted">{{project_specific_data[0].datetime}}</p>
                                    </div>

                                    <div class="team float-left">
                                        Schema Page / Validation logic is in works. Backend will train using defaults
                                    </div>

                                    <div class="text-right">
                                        <h5 class="font-size-15 mb-1"></h5>
                                        <p class="mb-0 text-muted"></p>
                                    </div>
                                </div>
                                
                            </div>
                            <!-- end task card -->

                            <div class="card task-box">
                                <div class="card-body">
                                    <div class="float-right ml-2">
                                        <span class="badge badge-pill badge-soft-warning font-size-12">Pending</span>
                                    </div>
                                    <div>
                                        <h5 class="font-size-15"><a href="javascript: void(0);" class="text-dark">Item Attributes (Optional)</a></h5>
                                        <p class="text-muted mb-4">{{project_specific_data[0].datetime}}</p>
                                    </div>

                                    <div class="team float-left">
                                        Schema Page / Validation logic is in works. Backend will train using defaults
                                    </div>

                                    <div class="text-right">
                                        <h5 class="font-size-15 mb-1"></h5>
                                        <p class="mb-0 text-muted"></p>
                                    </div>
                                </div>
                                
                            </div>
                            <!-- end task card -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- end col -->

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="dropdown float-right">
                            <a href="#" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                                <i class="mdi mdi-dots-vertical m-0 text-muted h5"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="#">Edit</a>
                                <a class="dropdown-item" href="#">Delete</a>
                            </div>
                        </div> <!-- end dropdown -->

                        <h4 class="card-title mb-4">Step 3: Train Models</h4>
                        <div id="complete-task" class="pb-1 task-list">
                            <div class="card task-box">
                                <div class="card-body">
                                    <div class="float-right ml-2" id="model_not_train">
                                        <span class="badge badge-pill badge-soft-secondary font-size-12">Waiting</span>
                                    </div>

                                    <div class="float-right ml-2" id="model_training" style="display: none;">
                                        <span class="badge badge-pill badge-soft-warning font-size-12">Pending</span>
                                    </div> 
                                    
                                    <div class="float-right ml-2" id="model_train_done" style="display: none;">
                                        <span class="badge badge-pill badge-soft-success font-size-12">Complete</span>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-size-15"><a href="javascript: void(0);" class="text-dark">Training</a></h5>
                                        <button class="btn btn-primary btn-lg waves-effect waves-light btn btn-primary" id="start_train">Start</button>
                                    </div>

                                    <div class="team float-center">
                                        <div class="spinner-border text-success m-1" role="status" id="training_progress" style="display: none;">
                                            <span class="sr-only">Loading...</span>
                                        </div>
                                    </div>

                                    <div class="text-right">
                                        <h5 class="font-size-15 mb-1"></h5>
                                        <p class="mb-0 text-muted"></p>
                                    </div>
                                </div>
                                
                            </div>
                            <!-- end task card -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-flex align-items-center justify-content-between">
                    <h4 class="mb-0 font-size-18">Dataset</h4>
                </div>
            </div>

            <div class="col-sm">
                <div class="card">
                    <div class="card-body">
                        
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">

                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Number of Rows/Size</th>
                                        <th>Dataset ID</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in project_specific_data[0].dataset %}
                                    <tr>
                                        <th scope="row">{{item.name}}</th>
                                        <td>
                                            {{item.type}}
                                        </td>
                                        <td>{{item.file_attributes}}</td>
                                        <td>{{item.datasetID}}</td>
                                        <td>{{item.status}}</td>
                                    </tr>
									{% endfor %}
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-flex align-items-center justify-content-between">
                    <h4 class="mb-0 font-size-18">Models</h4>
                </div>
            </div>

            <div class="col-sm">
                <div class="card">
                    <div class="card-body">
                        
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">

                                <thead>
                                    <tr>
                                        <th>Model Instance ID</th>
                                        <th>Last Trained</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% if not project_specific_data[0].model_available%}
                                    <tr>
                                        <td class="MuiTableCell-root MuiTableCell-body HH6u _1jwt" colspan="6" style="padding-bottom: 7px; padding-top: 12px;">
                                            <div style="text-align: center;">
                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="64" height="64" viewBox="0 0 172 172" style=" fill:#000000;">
                                                    <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                                        <path d="M0,172v-172h172v172z" fill="none"></path>
                                                        <g fill="#666666">
                                                            <path d="M20.15625,147.54375l64.5,22.84375v0c0.13438,0 0.26875,0.13438 0.40313,0.13438c0.13437,0 0.13437,0 0.26875,0c0.13438,0 0.26875,0 
                                                            0.5375,0h0.13438c0.26875,0 0.40313,0 0.67188,0h0.13437c0.13437,0 0.26875,-0.13438 0.40313,-0.13438v0l64.5,-22.84375c1.6125,-0.5375 2.6875,-2.15 
                                                            2.6875,-3.7625v-45.15l13.4375,-4.70312c1.075,-0.40313 2.01563,-1.34375 2.41875,-2.41875c0.40312,-1.075 0.26875,-2.41875 -0.40312,-3.49375l-16.125,-26.875c0,0 0,0 
                                                            0,-0.13438c0,-0.13437 -0.13438,-0.13437 -0.13438,-0.26875c0,0 0,0 0,-0.13437v0c0,-0.13438 -0.13437,-0.13438 -0.13437,-0.26875l-0.13438,-0.13438c0,0 0,0 -0.13437,-0.13437c0,0 
                                                            0,0 -0.13438,0c-0.13437,0 -0.13437,-0.13438 -0.26875,-0.13438l-0.13437,-0.13437c0,0 0,0 -0.13438,0h-0.13437c-0.13438,0 -0.13438,-0.13437 -0.26875,-0.13437c-0.13437,0 -0.13437,0 -0.26875,-0.13438c0,0 0,0 
                                                            -0.13437,0v0l-64.5,-22.84375c-0.26875,-0.13437 -0.5375,-0.13437 -0.80625,-0.13437h-0.13437c-0.26875,0 -0.40313,0 -0.67187,0c-0.13438,0 -0.13438,0 -0.26875,0c-0.26875,0 -0.5375,0.13437 -0.80625,0.13437l-64.5,22.84375v0c0,0 -0.13437,0 
                                                            -0.13437,0.13438v0c-0.13437,0.13437 -0.40313,0.13437 -0.5375,0.26875v0v0c-0.26875,0.13438 -0.5375,0.40313 -0.80625,0.67188v0l-0.13437,0.13438v0c-0.13438,0.13437 -0.13438,0.26875 -0.26875,0.26875v0c0,0 0,0 
                                                            -0.13437,0.13437l-16.125,26.875c-0.5375,0.94062 -0.67188,2.28437 -0.26875,3.35938c0.40312,1.075 1.34375,2.01563 2.41875,2.41875l13.4375,4.70313v45.28438c0,1.74687 1.075,3.225 
                                                            2.6875,3.7625zM146.46875,140.95938l-56.4375,20.02188v-32.38438c0,-2.28438 -1.74688,-4.03125 -4.03125,-4.03125c-2.28437,0 -4.03125,1.74688 -4.03125,4.03125v32.38438l-56.4375,-20.02188v-39.50625l43,15.18438c0.40313,0.13437 
                                                            0.94062,0.26875 1.34375,0.26875c1.34375,0 2.6875,-0.67187 3.49375,-2.01562l12.63125,-21.09687l12.63125,21.09687c0.80625,1.34375 2.15,2.01563 
                                                            3.49375,2.01563c0.40313,0 0.94062,-0.13437 1.34375,-0.26875l43,-15.18438zM90.03125,45.95625l48.375,17.2l-48.375,17.2zM103.87188,108.0375l-11.95938,-19.8875l56.70625,-20.15625l11.95937,
                                                            19.8875zM23.24688,67.99375l56.70625,20.15625l-11.95937,19.8875l-56.70625,-20.15625z">
                                                            </path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </div>
                                            <div style="margin-top: 4px; font-weight: 300; font-size: 13px; text-align: center; opacity: 0.5;">Empty</div>
                                        </td>
                                    </tr>
                                    {% endif %}
                                    
                                    <tr>
                                        <td>
                                            {{model_info['model_id']}}
                                        </td>

                                        <td>
                                            {{model_info['date']}}
                                        </td>
                                        <td >
                                            Active
                                        </td>
                                        <td>
                                            Active
                                        </td>
                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div> <!-- container-fluid -->
</div>
<!-- End Page-content -->

{% endblock content %}

{% block javascripts %}

<!-- dragula plugins -->
<script src="/static/assets_advanced/libs/dragula/dragula.min.js"></script>

<script src="/static/assets_advanced/js/pages/task-kanban.init.js"></script>


<script type=text/javascript>
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

    $(function() {
      $('button#start_train').bind('click', function() {
          console.log('In here');
        $.getJSON('/train_model/{{project_specific_data[0].project_id}}', {
          project_id:"{{project_specific_data[0].project_id}}"
        }, function(data) {
            console.log(data);
            $( "#start_train" ).hide();
            $( "#training_progress" ).show();

        });
        return false;
      });
    });

    {% if project_specific_data[0].in_training %}
        $( "#start_train" ).hide();
        $( "#training_progress" ).show();
        $( "#model_not_train" ).hide();
        $( "#model_training" ).show();

    {% endif %}

    {% if project_specific_data[0].model_available %}
        $( "#start_train" ).hide();
        $( "#training_progress" ).hide();
        $( "#model_not_train" ).hide();
        $( "#model_training" ).hide();
        $( "#model_train_done" ).show();
    {% endif %}

  </script> 

{% endblock javascripts %}